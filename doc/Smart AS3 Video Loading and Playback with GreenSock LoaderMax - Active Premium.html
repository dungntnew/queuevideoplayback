<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0043)http://codeknow.com/opensource/videoLoader/ -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium</title>

	<link rel="stylesheet" href="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/style.css" type="text/css" media="screen">	
	<!--<link rel="shortcut icon" href="http://marketplace.tutsplus.com/favicons/tutsmarketplace.ico"/>-->
	
	<!--Syntax Highlighter-->
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shCore.js"></script>
	<!--Syntax Highlighter Brushes-->
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushPlain.js"></script>
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushAS3.js"></script>
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushJScript.js"></script>
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushPhp.js"></script>
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushXml.js"></script>
	<script type="text/javascript" src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shBrushObjC.js"></script>
	<!--Syntax Highlighter Styles-->
	<link type="text/css" rel="stylesheet" href="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shThemeDefault.css">
	<link type="text/css" rel="stylesheet" href="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/shCore.css">
	<!--Syntax Highlighter Go!-->
	<script type="text/javascript">SyntaxHighlighter.all();</script>
	
</head>

<body>
<div id="container">
<div id="top">
    
    <img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/preview.jpg" id="preview">
  	<h2>Smart AS3 Video Loading and Playback with GreenSock LoaderMax</h2>
	<h4>Composed By: michael B</h4>
  	<p>In this tutorial we will be using <a href="http://www.greensock.com/loadermax/" title="GreenSock LoaderMax" target="_blank">GreenSock LoaderMax</a>'s VideoLoader to build a simple, lightweight, XML-driven video player that intelligently preloads multiple videos, plays them sequentially (with crossfade transitions) and has play/pause/next/back/mute controls and a progress/seek bar.</p>
  
</div>

<div id="content">


<h3>Final Result Preview</h3>
<p><a href="http://codeknow.com/opensource/videoLoader/preview/index.html" target="_blank">Check out the demo</a> for the final result.</p>

<h3>The Problem</h3>
<p>Flash has some built-in components for video playback, but they're bloated, difficult to customize, and can't accommodate intelligent sequential preloading of multiple video files or elegant transitions. Many developers have reported buggy behavior too. We could strip things all the way down to using the NetStream class directly, but that gets insanely cumbersome particularly because there are numerous bugs and inconsistencies there too. </p>

<hr>
<h3>The Solution</h3>
<p><a href="http://www.greensock.com/loadermax/" title="GreenSock LoaderMax" target="_blank">LoaderMax</a> is a new AS3 loading system from GreenSock that does for loading what <a href="http://www.greensock.com/tweenmax/" title="GreenSock TweenMax" target="_blank">TweenMax</a> and <a href="http://www.greensock.com/tweenlite/" title="GreenSock TweenLite" target="_blank">TweenLite</a> did for tweening - makes things so much easier and more intuitive. Explaining all the features and benefits of using LoaderMax is beyond the scope of this article, but I'll mention just a few that are pertinent to our project: </p>

<ul>
	<li><strong>Load many files sequentially and report progress as a whole</strong>. </li>
    <li><strong>Dynamic prioritizing</strong>. If the user clicks the "next" or "back" button several times quickly to skip to another video that hasn't loaded yet, LoaderMax makes it simple to prioritize that video immediately in the loading queue, maximizing the user's bandwidth and minimizing load time.</li>
    <li><strong>Full playback control through ActionScript</strong>. LoaderMax's VideoLoader class not only loads the video file, but also provides advanced playback control including play, pause, volume, buffer progress, download progress, and playback progress reporting.</li>
    <li><strong>Automatically adjust buffer</strong>. We can set the bufferTime initially and then if it empties during playback, VideoLoader can automatically analyze the speed at which the file has been loading and adjust the bufferTime accordingly to ensure that playback doesn't stop/start/stop/start on slow connections. </li>
    <li><strong>Proportionally scale the video to fit and center its registration point.</strong></li>
    <li><strong>Avoid bugs</strong>. NetStream and the built-in components suffer from several bugs and inconsistencies that VideoLoader works around. Oh, and VideoLoader is about <strong>1/5th the size</strong> of the FLVPlayback component.</li>
    <li><strong>Read video  data from XML</strong>. This can make updates and additions much easier.</li>
</ul>

<p>Read more about LoaderMax <a href="http://www.greensock.com/loadermax/" title="GreenSock LoaderMax" target="_blank">on the GreenSock website</a>.</p>

<hr>
<h3><span>Step 1:</span> Overview of the Code and UI</h3>
<p>Inside the provided Source zip folder, are source files to both a <code>start</code> and a <code>finish</code> file structure. This allows you to see the final results pre-compiled (finish). To follow the tutorial, begin with contents of the <code>start</code> folder. </p>
<hr>

<p>Please note that video assets are best rendered at <code>960</code> x <code>540</code> either as  a flv, f4v, mp4, or mov. The latest version of the flash player should be installed to also benefit  from all the compression codecs Flash now recognizes. The latest version  of the flash player can be found <a href="http://get.adobe.com/flashplayer/" title="Adobe Flash Player" target="_blank">here</a>.</p>
<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/01.jpg" alt=""></div>
<hr>

<p>The Flash <code>.fla</code> file contains a full library of pre-designed custom video controls (movie clips and images) allowing a more granular focus on the AS3 code. Again, the goal of this tutorial is to allow a deeper understanding of LoaderMax (primarily its VideoLoader and XMLLoader classes) as well as some of the logic that drives a custom video player. Therefore I won't spend a lot of time explaining the <code>.fla</code> file.</p>
<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/01b.jpg" alt=""></div>

<p>A review of the <em>Timeline</em> layers in Flash. Each layer contains a MovieClip named accordingly.</p>
<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/02.jpg" alt=""></div>
<hr>

<p>Create a new ActionScript class  named "Main" (<code>Main.as</code>) inside the <code>../src/</code> directory. Then open the publish settings dialogin the Flash file and change the publishing directories for both the <code>.swf</code> and <code>.html</code> files to the root directory of the <code>bin</code> folder.</p>
<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/05.jpg" alt=""></div>
<hr>

<p>In the ActionScript 3.0 settings dialog, add a source path  to <code>../src/</code> so that Flash knows where to find our source code. Make the Document class "Main" (the file we created in the previous step).</p>
<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/06.jpg" alt=""></div>
<hr>
<p>(<a href="http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/">Follow this Quick Tip</a> for more information on using a document class.)</p>
<hr>

<p><a href="http://www.greensock.com/loadermax/">Download</a> the most recent GreenSock LoaderMax version and place the whole GreenSock <code>com</code> folder inside of the <code>../src/</code> directory. At the time of this writing, we are using version 1.61, updated 2010-10-05.</p>
<hr>
<h3><span>Step 2:</span> The Main Document Class</h3>
<p>Start by opening up the <code>Main.as</code> file. Let's add the import statements at the top for all the necessary classes and create 5 private variables that we'll need for tracking various values.</p>

<div id="highlighter_925088" class="syntaxhighlighter  Brush"><div class="bar                                                              "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush color3">package</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">flash.display.MovieClip;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">flash.events.Event;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">flash.events.MouseEvent;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">com.greensock.TweenMax;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">com.greensock.events.LoaderEvent;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">com.greensock.loading.LoaderMax;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">com.greensock.loading.XMLLoader;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">com.greensock.loading.VideoLoader;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">import</code> <code class="Brush plain">flash.geom.Rectangle;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">public</code> <code class="Brush color3">class</code> <code class="Brush plain">Main </code><code class="Brush keyword">extends</code> <code class="Brush plain">MovieClip {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//an array containing the VideoLoaders in the order they should be played</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">private</code> <code class="Brush variable">var</code> <code class="Brush plain">_videos:</code><code class="Brush keyword">Array</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//keeps track of the VideoLoader that is currently playing</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">private</code> <code class="Brush variable">var</code> <code class="Brush plain">_currentVideo:VideoLoader;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//if true, the mouse is over the video or UI controls</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">private</code> <code class="Brush variable">var</code> <code class="Brush plain">_mouseIsOver:</code><code class="Brush keyword">Boolean</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//If true, the audio has been muted</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">private</code> <code class="Brush variable">var</code> <code class="Brush plain">_silentMode:</code><code class="Brush keyword">Boolean</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//tracks whether or not the video was paused when the user moused-down on the scrubber. We must pause for scrubbing, but this tells us whether or not to playVideo() when the user releases the mouse. </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">private</code> <code class="Brush variable">var</code> <code class="Brush plain">_preScrubPaused:</code><code class="Brush keyword">Boolean</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">public</code> <code class="Brush color3">function</code> <code class="Brush plain">Main() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>Note: we'll be using TweenMax for doing the video crossfades, button tweens, and pretty much any animated effects.</p>

<hr>
<h3><span>Step 3:</span> Test</h3>
<p>Just simply compile. This will ensure that the project is set up correctly and the GreenSock classes are importing correctly. Not too much should be happening at this point but, having no errors is imperative  to next steps.</p>
<p>If you do get an error please just go back and ensure the project is set up correctly following the directions in Step 1.</p>

<hr>
<h3><span>Step 4:</span> Build the XML File</h3>
<p>One of the neat features of LoaderMax is that it can load an XML file and recognize LoaderMax-related nodes inside the XML file and automatically parse them, creating the necessary loader instances. In this case, we will be loading 3 videos, so create an XML document named <code>videoList.xml</code> and save it in the <code>../bin/xml/</code> directory. Then begin populating the XML with a <code>&lt;LoaderMax&gt;</code> node like this:</p>

<div id="highlighter_357925" class="syntaxhighlighter  Brush"><div class="bar                                                 "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush comments">&lt;!--?xml version="1.0" encoding="iso-8859-1"?--&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush plain">&lt;</code><code class="Brush keyword">videolist</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;</code><code class="Brush keyword">loadermax</code> <code class="Brush color1">name</code><code class="Brush plain">=</code><code class="Brush string">"videoListLoader"</code> <code class="Brush color1">maxconnections</code><code class="Brush plain">=</code><code class="Brush string">"1"</code> <code class="Brush color1">prependurls</code><code class="Brush plain">=</code><code class="Brush string">"assets/"</code><code class="Brush plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;/</code><code class="Brush keyword">loadermax</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="Brush plain">&lt;/</code><code class="Brush keyword">videolist</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div></div></div>

<p>The <code>&lt;videoList&gt;</code> root node is insignificant. We could name it anything. The important part is the <code>&lt;LoaderMax&gt;</code> that contains a few attributes:</p>
<ul>
	<li><code>name</code> - defining a name here makes it easy to reference inside ActionScript. For example, to get the LoaderMax instance that results from the <code>&lt;LoaderMax name="videoListLoader"&gt;</code> node, all we'd need to do is <code>LoaderMax.getLoader("videoListLoader");</code></li>
    <li><code>maxConnections</code> - tells LoaderMax to only load one video at a time. Normally LoaderMax will try to load 2 files at a time to maximize overall loading speed, but since videos are typically very large and we want to make sure the first one gets all the bandwidth and loads as fast as possible, we set maxConnections to 1.</li>
    <li><code>prependURLs</code> - prepends all of the URLs of the child loaders with <code>assets/</code>. This can be particularly useful if you have a large number of assets that all come from the same domain - you can just include the individual file names for each loader but in the <code>&lt;LoaderMax&gt;</code> wrapper, use <code>prependURLs</code> or <code>replaceURLText</code> to make global adjustments. Maybe you have a production server and a different deployment server - changing from one to the other could be as simple as changing the <code>prependURL</code> value.</li>
</ul>


<hr>
<p>Next, let's add a <code>&lt;VideoLoader&gt;</code> node for each of our videos:</p>

<div id="highlighter_374625" class="syntaxhighlighter  Brush"><div class="bar                                                                                                        "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush comments">&lt;!--?xml version="1.0" encoding="iso-8859-1"?--&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush plain">&lt;</code><code class="Brush keyword">videolist</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;</code><code class="Brush keyword">loadermax</code> <code class="Brush color1">name</code><code class="Brush plain">=</code><code class="Brush string">"videoListLoader"</code> <code class="Brush color1">maxconnections</code><code class="Brush plain">=</code><code class="Brush string">"1"</code> <code class="Brush color1">prependurls</code><code class="Brush plain">=</code><code class="Brush string">"assets/"</code><code class="Brush plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;</code><code class="Brush keyword">videoloader</code> <code class="Brush color1">name</code><code class="Brush plain">=</code><code class="Brush string">"videoID0"</code> <code class="Brush color1">url</code><code class="Brush plain">=</code><code class="Brush string">"videoClip01.flv"</code> <code class="Brush color1">height</code><code class="Brush plain">=</code><code class="Brush string">"406"</code> <code class="Brush color1">width</code><code class="Brush plain">=</code><code class="Brush string">"720"</code> <code class="Brush color1">scalemode</code><code class="Brush plain">=</code><code class="Brush string">"proportionalInside"</code> <code class="Brush color1">centerregistration</code><code class="Brush plain">=</code><code class="Brush string">"true"</code> <code class="Brush color1">alpha</code><code class="Brush plain">=</code><code class="Brush string">"0"</code> <code class="Brush color1">autoplay</code><code class="Brush plain">=</code><code class="Brush string">"false"</code><code class="Brush plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;</code><code class="Brush keyword">videoloader</code> <code class="Brush color1">name</code><code class="Brush plain">=</code><code class="Brush string">"videoID1"</code> <code class="Brush color1">url</code><code class="Brush plain">=</code><code class="Brush string">"videoClip02.mp4"</code> <code class="Brush color1">height</code><code class="Brush plain">=</code><code class="Brush string">"406"</code> <code class="Brush color1">width</code><code class="Brush plain">=</code><code class="Brush string">"720"</code> <code class="Brush color1">scalemode</code><code class="Brush plain">=</code><code class="Brush string">"proportionalInside"</code> <code class="Brush color1">centerregistration</code><code class="Brush plain">=</code><code class="Brush string">"true"</code> <code class="Brush color1">alpha</code><code class="Brush plain">=</code><code class="Brush string">"0"</code> <code class="Brush color1">autoplay</code><code class="Brush plain">=</code><code class="Brush string">"false"</code><code class="Brush plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;</code><code class="Brush keyword">videoloader</code> <code class="Brush color1">name</code><code class="Brush plain">=</code><code class="Brush string">"videoID2"</code> <code class="Brush color1">url</code><code class="Brush plain">=</code><code class="Brush string">"videoClip03.flv"</code> <code class="Brush color1">height</code><code class="Brush plain">=</code><code class="Brush string">"406"</code> <code class="Brush color1">width</code><code class="Brush plain">=</code><code class="Brush string">"720"</code> <code class="Brush color1">scalemode</code><code class="Brush plain">=</code><code class="Brush string">"proportionalInside"</code> <code class="Brush color1">centerregistration</code><code class="Brush plain">=</code><code class="Brush string">"true"</code> <code class="Brush color1">alpha</code><code class="Brush plain">=</code><code class="Brush string">"0"</code> <code class="Brush color1">autoplay</code><code class="Brush plain">=</code><code class="Brush string">"false"</code><code class="Brush plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">&lt;/</code><code class="Brush keyword">videoloader</code><code class="Brush plain">&gt;&lt;/</code><code class="Brush keyword">videoloader</code><code class="Brush plain">&gt;&lt;/</code><code class="Brush keyword">videoloader</code><code class="Brush plain">&gt;&lt;/</code><code class="Brush keyword">loadermax</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="Brush plain">&lt;/</code><code class="Brush keyword">videolist</code><code class="Brush plain">&gt; </code></td></tr></tbody></table></div></div></div>

<p>Again, we can set various properties right away that LoaderMax will recognize:</p>
<ul>
	<li><code>name</code> - once again, this simply makes it easier to reference individual loaders inside ActionScript.</li>
    <li><code>url</code> - defines the URL for each VideoLoader</li>
    <li><code>height/width</code> - optionally define a width and height that the video should be scaled to fit into. </li>
    <li><code>scaleMode</code> - controls how the video is scaled to fit into the width/height. Options are: <code>stretch</code>, <code>proportionalInside</code>, <code>proportionalOutside</code>, <code>widthOnly</code>, <code>heightOnly</code>, and <code>none</code>.</li>
    <li><code>centerRegistration</code> - when <code>true</code>, the video's registration point will be located in its center. This can be useful if, for example, you plan to animate the scale of the video and want it to grow/shrink from the center instead of the upper left corner.</li>
    <li><code>alpha</code> - the initial alpha of the video. Since we'll be doing crossfades, we want the initial alpha value to be 0.</li>
    <li><code>autoPlay</code> - by default, videos will being playing as soon as they are buffered, but since we're preloading multiple videos that would be bad because we'd start to hear the audio from each as soon as they finished buffering. Setting <code>autoPlay</code> to <code>false</code> makes sure the videos stay paused until we tell them to play.</li>
</ul>
<p>Our XML document could contain other generic information too - it isn't limited to LoaderMax-related data. There are also many other attributes that can be used to control various aspects of the loaders. See the <a href="http://www.greensock.com/as/docs/tween/_loadermax.html" target="_blank">ASDocs</a> for details.</p>


<hr>
<h3><span>Step 5:</span> activate() VideoLoader and XMLLoader</h3>
<p>Inside of the <code>Main</code> constructor function (in <code>Main.as</code>), we need to activate any loader types that we want LoaderMax to recognize when parsing the XML file. Why doesn't LoaderMax just activate them all automatically? Because one of the key design considerations in LoaderMax was keeping file size low. Allowing each type of loader to be activated individually makes the system far more efficient and can reduce file size by 60% or more. You only need to activate the loader types once in your swf, so we'll do it in our constructor. Just pass LoaderMax.activate() an array of the loader classes to activate:</p>
<div id="highlighter_470567" class="syntaxhighlighter  Brush"><div class="bar                    "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">public</code> <code class="Brush color3">function</code> <code class="Brush plain">Main() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">LoaderMax.activate([XMLLoader, VideoLoader]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 6:</span> Initialize the UI</h3>
<p>Create a private function named <code>initUI()</code> that will set up the initial state of our user interface and prevent mouse interaction with a few elements (see the comments in the code for details). Call <code>initUI()</code> inside of the constructor function.</p>
<div id="highlighter_404366" class="syntaxhighlighter  Brush"><div class="bar                                                                                                                                                                                             "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">initUI():</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//ignore mouse interaction with progressBar_mc so that clicks pass through to the loadingBar_mc whose listener handles skipping the video to that spot.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.progressBar_mc.mouseEnabled = </code><code class="Brush keyword">false</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//ignore mouse interaction with preloader_mc</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">preloader_mc.mouseEnabled = </code><code class="Brush keyword">false</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//the "layer" blendMode makes the alpha fades cleaner (overlapping objects don't add alpha levels)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.blendMode = </code><code class="Brush string">"layer"</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//set the progress and loading bars and the scrubber to the very beginning</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.progressBar_mc.width = controlUI_mc.loadingBar_mc.width = </code><code class="Brush value">0</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.scrubber_mc.x = controlUI_mc.progressBar_mc.x;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//initially hide the user interface - autoAlpha:0 sets alpha to 0 and visible to false.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.allTo([controlUI_mc, playPauseBigButton_mc, preloader_mc], </code><code class="Brush value">0</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<h3><span>Step 7:</span> Load the XML</h3>
<p>We'll use LoaderMax's XMLLoader to load our XML. The first parameter in the constructor is the URL where the XML file can be found. The second parameter is a generic object that contains various special property values - in this case we'll give our XMLLoader a name and tell it to call a function named <code>xmlHandler()</code> when it completes. By the way, defining <code>onComplete:xmlHandler</code> is simply a shorter way of doing <code>addEventListener(LoaderEvent.COMPLETE, xmlHandler)</code>. It is easy to listen for many different kinds of events like <code>PROGRESS</code>, <code>FAIL</code>, <code>ERROR</code>, <code>INIT</code>, etc. but we'll keep our example simple and just worry about the onComplete. In a real-world application, it would be good to at least listen for the FAIL event too in case one of the URLs was incorrect or the server went down. Our constructor should now look like this:</p>
<div id="highlighter_702576" class="syntaxhighlighter  Brush"><div class="bar                                     "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">public</code> <code class="Brush color3">function</code> <code class="Brush plain">Main() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">LoaderMax.activate([XMLLoader, VideoLoader]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">initUI();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">xmlLoader:XMLLoader = </code><code class="Brush keyword">new</code> <code class="Brush plain">XMLLoader(</code><code class="Brush string">"xml/videoList.xml"</code><code class="Brush plain">, {name:</code><code class="Brush string">"videoList"</code><code class="Brush plain">, onComplete:xmlHandler});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">xmlLoader.load();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<h3><span>Step 8:</span> Load the Videos</h3>
<p>Now let's create our <code>xmlHandler()</code> method that gets called when the XML has finished loading. Remember, LoaderMax will automatically recognize the &lt;LoaderMax&gt; and &lt;VideoLoader&gt; nodes and create the corresponding instances so all we need to do is get the LoaderMax named "videoListLoader" and load() it. That will begin loading the first VideoLoader and as soon as that one finishes loading, it will automatically load the next, and so on until all of the nested VideoLoaders have loaded. Let's store the VideoLoaders in a <code>_videos</code> array to make it easy to figure out their order (we'll need that when the user clicks the "next" or "back" buttons). We can also start showing the first video - we'll build the <code>showVideo()</code> method soon.</p>
<div id="highlighter_550823" class="syntaxhighlighter  Brush"><div class="bar                                                                        "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">xmlHandler(event:LoaderEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//get the LoaderMax named "videoListLoaded" which was inside our XML</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">queue:LoaderMax = LoaderMax.getLoader(</code><code class="Brush string">"videoListLoader"</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//store the nested VideoLoaders in an array</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_videos = queue.getChildren();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//start loading the queue of VideoLoaders (they will load in sequence)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">queue.load(); </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//show the first video</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">showVideo(_videos[</code><code class="Brush value">0</code><code class="Brush plain">]);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 9:</span> Start building showVideo()</h3>
<p>This is really the heart of the application. <code>showVideo()</code> accepts a single parameter - the VideoLoader that we want to show. It will need to handle the transition between any video that is currently playing and the new video that should start playing. For now, let's just focus on getting our first video playing.</p>
<div id="highlighter_329457" class="syntaxhighlighter  Brush"><div class="bar                                                       "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">showVideo(video:VideoLoader):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//set the _currentLoader variable so that it refers to the new video.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo = video;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//start playing the video from its beginning</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.gotoVideoTime(</code><code class="Brush value">0</code><code class="Brush plain">, </code><code class="Brush keyword">true</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//when we addChild() the VideoLoader's content, it makes it rise to the top of the stacking order</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">videoContainer_mc.addChild(_currentVideo.content);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the VideoLoader's content alpha in. Remember, the "content" refers to the ContentDisplay Sprite that we see on the stage.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo.content, </code><code class="Brush value">0.8</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<h3><span>Step 10:</span> Test</h3>
<p>Test the movie and make sure the first video begins playing. You won't see any buttons yet; we'll work on that next. All we care about right now is seeing the first video playing.</p>




<hr>
<h3><span>Step 11:</span> Add Play/Pause Functionality</h3>
<p>Our various interface elements like the play/pause button, scrubber, mute button, etc. affect the video that's currently playing (<code>_currentVideo</code>) but while the XML was loading, <code>_currentVideo</code> was null so in order to prevent null reference errors from being thrown, we simply don't hook up those interface elements until we set <code>_currentVideo</code> to a real VideoLoader. The user could click the play/pause button while the XML was loading, for example, and it would have no effect. But now that we've got our first VideoLoader playing, let's call an <code>activateUI()</code> method where we'll put all the code that handles wiring up the user interface. We'll also build a little <code>addListeners()</code> utility function that allows us to add the same listener to multiple objects in an array with less code than it would take to manually add each redundant listener. For now, we will focus on adding the play/pause functionality:</p>
<div id="highlighter_180374" class="syntaxhighlighter  Brush"><div class="bar                                                                                            "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">addListeners(objects:</code><code class="Brush keyword">Array</code><code class="Brush plain">, type:</code><code class="Brush keyword">String</code><code class="Brush plain">, func:Function):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">i:</code><code class="Brush keyword">int</code> <code class="Brush plain">= objects.length;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">while</code> <code class="Brush plain">(i--) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">objects[i].addEventListener(type, func);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">activateUI():</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">addListeners([controlUI_mc, videoContainer_mc, playPauseBigButton_mc], MouseEvent.ROLL_OVER, toggleControlUI);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">addListeners([controlUI_mc, videoContainer_mc, playPauseBigButton_mc], MouseEvent.ROLL_OUT, toggleControlUI);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">addListeners([controlUI_mc.playPauseButton_mc, playPauseBigButton_mc, videoContainer_mc], MouseEvent.CLICK, togglePlayPause);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<p>Now let's build the <code>toggleControlUI()</code> method that fades in the user interface controls. We use the <code>_mouseIsOver</code> variable to track the state. TweenMax's autoAlpha feature is useful here - it is the same thing as tweening the alpha except that it also automatically toggles the <code>visible</code> property to <code>false</code> when alpha hits 0, and <code>true</code> when alpha isn't 0.</p>
<div id="highlighter_236494" class="syntaxhighlighter  Brush"><div class="bar                                             "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">toggleControlUI(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_mouseIsOver = !_mouseIsOver;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_mouseIsOver) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(controlUI_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">} </code><code class="Brush keyword">else</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(controlUI_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<p>The <code>togglePlayPause()</code> method not only alters the VideoLoader to playback state, but it also changes the user interface buttons to indicate the corresponding state. The playPauseBigButton_mc should either fade in or out, the playPauseButton_mc should skip to the correct label (either showing the pause button or play button), and for an extra nifty effect, we'll blur the video and dim it to a brightness of 0.5 whenever it is paused. Again, we use TweenMax to do the tweens.</p>

<div id="highlighter_796876" class="syntaxhighlighter  Brush"><div class="bar                                                                       "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">togglePlayPause(event:MouseEvent=</code><code class="Brush keyword">null</code><code class="Brush plain">):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.videoPaused = ! _currentVideo.videoPaused;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.videoPaused) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(playPauseBigButton_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.playPauseButton_mc.gotoAndStop(</code><code class="Brush string">"paused"</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(videoContainer_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {blurFilter:{blurX:</code><code class="Brush value">6</code><code class="Brush plain">, blurY:</code><code class="Brush value">6</code><code class="Brush plain">}, colorMatrixFilter:{brightness:</code><code class="Brush value">0.5</code><code class="Brush plain">}});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">} </code><code class="Brush keyword">else</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(playPauseBigButton_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.playPauseButton_mc.gotoAndStop(</code><code class="Brush string">"playing"</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(videoContainer_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {blurFilter:{blurX:</code><code class="Brush value">0</code><code class="Brush plain">, blurY:</code><code class="Brush value">0</code><code class="Brush plain">, remove:</code><code class="Brush keyword">true</code><code class="Brush plain">}, colorMatrixFilter:{brightness:</code><code class="Brush value">1</code><code class="Brush plain">, remove:</code><code class="Brush keyword">true</code><code class="Brush plain">}});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<p>Invoke <code>activateUI()</code> inside <code>showVideo()</code> and then test the movie and you should now be able to click on the video or the play/pause button to toggle the playback mode.</p>



<hr>
<h3><span>Step 12:</span> Display the Loading Progress</h3>
<p>We've got a black bar MovieClip underneath the green prgress bar MovieClip that we want to display the loading progress of the current video, so let's add a listener inside the <code>showVideo()</code> method:</p>
<div id="highlighter_721299" class="syntaxhighlighter  Brush"><div class="bar                        "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">_currentVideo.addEventListener(LoaderEvent.PROGRESS, updateDownloadProgress);</code></td></tr></tbody></table></div></div></div>

<p>Next, we'll create the <code>updateDownloadProgress()</code> method that simply alters the loadingBar_mc's scaleX based on the VideoLoader's <code>progress</code> property which is always a value between 0 and 1 representing how much of the file has been loaded (<code>bytesLoaded / bytesTotal</code>). This will cause the loadingBar_mc to grow from a scaleX of 0 when the file hasn't loaded any bytes to a scaleX of 1 when it is fully loaded.</p>
<div id="highlighter_226096" class="syntaxhighlighter  Brush"><div class="bar                                                         "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">updateDownloadProgress(event:LoaderEvent=</code><code class="Brush keyword">null</code><code class="Brush plain">):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.loadingBar_mc.scaleX = _currentVideo.progress;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 13:</span> Display the Playback Progress</h3>
<p>Let's apply the same concept to the progressBar_mc so that it reflects the overall playback progress of the VideoLoader. Add a PLAY_PROGRESS listener inside the <code>showVideo()</code> method:</p>
<div id="highlighter_591728" class="syntaxhighlighter  Brush"><div class="bar                     "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.PLAY_PROGRESS, updatePlayProgress);</code></td></tr></tbody></table></div></div></div>

<p>Create the <code>updatePlayProgress()</code> method but this time, we also want to update the current time value in the TextField to the right of the mute button (the one that says something like "00:09 / 00:15"). Let's build a <code>force2Digits()</code> method that we can feed a numeric value and have it spit back the two-digit version of it (for any values under 10, a "0" gets prepended). We'll also set the <code>x</code> property of the <code>scrubber_mc</code> so that it is always positioned right over the end of the progressBar_mc. We'll add scrubbing functionality later.</p>
<div id="highlighter_784284" class="syntaxhighlighter  Brush"><div class="bar                                                                                "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">force2Digits(value:</code><code class="Brush keyword">Number</code><code class="Brush plain">):</code><code class="Brush keyword">String</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">return</code> <code class="Brush plain">(value &lt; </code><code class="Brush value">10</code><code class="Brush plain">) ? </code><code class="Brush string">"0"</code> <code class="Brush plain">+ </code><code class="Brush keyword">String</code><code class="Brush plain">(value) : </code><code class="Brush keyword">String</code><code class="Brush plain">(value);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">updatePlayProgress(event:LoaderEvent=</code><code class="Brush keyword">null</code><code class="Brush plain">):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">time:</code><code class="Brush keyword">Number</code> <code class="Brush plain">= _currentVideo.videoTime;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">minutes:</code><code class="Brush keyword">String</code> <code class="Brush plain">= force2Digits(</code><code class="Brush keyword">int</code><code class="Brush plain">(time / </code><code class="Brush value">60</code><code class="Brush plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">seconds:</code><code class="Brush keyword">String</code> <code class="Brush plain">= force2Digits(</code><code class="Brush keyword">int</code><code class="Brush plain">(time % </code><code class="Brush value">60</code><code class="Brush plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.currentTime_tf.text = minutes + </code><code class="Brush string">":"</code> <code class="Brush plain">+ seconds;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.progressBar_mc.scaleX = _currentVideo.playProgress;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.scrubber_mc.x = controlUI_mc.progressBar_mc.x + controlUI_mc.progressBar_mc.width;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 14:</span> Add Scrubbing Functionality</h3>
<p>First, let's add a <code>MOUSE_DOWN</code> listener to the scrubber_mc inside the <code>activateUI()</code> method:</p>
<div id="highlighter_573255" class="syntaxhighlighter  Brush"><div class="bar          "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">controlUI_mc.scrubber_mc.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownScrubber);</code></td></tr></tbody></table></div></div></div>

<p>When the user mouses-down on the scrubber_mc, we'll use ActionScript's <code>startDrag()</code> to make it draggable, defining a bounds Rectangle to ensure that it cannot be dragged outside of the progress bar area. Since the video should pause as soon as the user mouses-down on the scrubber, we'll utilize the <code>_preScrubPaused</code> variable to keep track of the paused state so that we know whether or not to <code>playVideo()</code> when the user releases the mouse. </p>
<div id="highlighter_772407" class="syntaxhighlighter  Brush"><div class="bar                                           "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">mouseDownScrubber(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_preScrubPaused = _currentVideo.videoPaused;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.videoPaused = </code><code class="Brush keyword">true</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.scrubber_mc.startDrag(</code><code class="Brush keyword">false</code><code class="Brush plain">, </code><code class="Brush keyword">new</code> <code class="Brush plain">Rectangle(controlUI_mc.loadingBar_mc.x, controlUI_mc.loadingBar_mc.y, controlUI_mc.loadingBar_mc.width, </code><code class="Brush value">0</code><code class="Brush plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">stage.addEventListener(MouseEvent.MOUSE_UP, mouseUpScrubber);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">stage.addEventListener(MouseEvent.MOUSE_MOVE, scrubToMouse);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<p>Notice that we added <code>MOUSE_MOVE</code> and <code>MOUSE_UP</code> listeners to the stage - don't add them to the scrubber_mc because the user may mouse-up over another area of the stage (outside the bounds we defined for the dragging). Adding the listeners to the stage ensures that those events will be dispatched regardless of where the user's mouse goes. Now let's build the <code>scrubToMouse()</code> method that gets invoked every time the mouse moves:</p>
<div id="highlighter_527941" class="syntaxhighlighter  Brush"><div class="bar                   "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">scrubToMouse(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.progressBar_mc.width = controlUI_mc.mouseX - controlUI_mc.progressBar_mc.x;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.playProgress = controlUI_mc.progressBar_mc.scaleX;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<p>All we're doing here is setting the width of the progressBar_mc so that its right edge is wherever the mouse is. We also set the VideoLoader's <code>playProgress</code> value accordingly so that the video skips to the appropriate spot. Remember, the <code>playProgress</code> value is always between 0 and 1 and indicates the overall playback progress of the video, so 0.5 would be halfway through the video. Immediately after the progressBar_mc's <code>width</code> been adjusted, we can use its <code>scaleX</code> as the VideoLoader's <code>playProgress</code> because they always correlate.</p>

<p>Next, we'll set up the <code>mouseUpScrubber()</code> method that gets invoked when the user releases their mouse after having moused-down on the scrubber. This means they're done scrubbing so we'll remove the stage listeners, stop dragging, and set the playback state of the video:</p>
<div id="highlighter_949839" class="syntaxhighlighter  Brush"><div class="bar                              "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">mouseUpScrubber(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">stage.removeEventListener(MouseEvent.MOUSE_UP, mouseUpScrubber);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">stage.removeEventListener(MouseEvent.MOUSE_MOVE, scrubToMouse);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.scrubber_mc.stopDrag();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.videoPaused = _preScrubPaused;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 15:</span> Activate the Mute Button</h3>
<p>First, add a <code>CLICK</code> listener to the <code>audio_mc</code> button inside the <code>activateUI()</code> method:</p>
<div id="highlighter_563942" class="syntaxhighlighter  Brush"><div class="bar       "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">controlUI_mc.audio_mc.addEventListener(MouseEvent.CLICK, toggleAudio);</code></td></tr></tbody></table></div></div></div>

<p>Then, create a <code>toggleAudio()</code> function that toggles the <code>_silentMode</code> variable, sets the volume of the VideoLoader, and jumps the <code>audio_mc.label</code> MovieClip to the appropriate label:</p>
<div id="highlighter_997211" class="syntaxhighlighter  Brush"><div class="bar                                                                "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">toggleAudio(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_silentMode = !_silentMode;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_silentMode) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.volume = </code><code class="Brush value">0</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.audio_mc.</code><code class="Brush keyword">label</code><code class="Brush plain">.gotoAndStop(</code><code class="Brush string">"off"</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">} </code><code class="Brush keyword">else</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.volume = </code><code class="Brush value">1</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.audio_mc.</code><code class="Brush keyword">label</code><code class="Brush plain">.gotoAndStop(</code><code class="Brush string">"on"</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 16:</span> When the Video Finishes Playing, Go to the Next Video</h3>
<p>VideoLoader will dispatch a <code>VIDEO_COMPLETE</code> event when it finishes playing the video, so let's add a listener in the <code>showVideo()</code> method:</p>
<div id="highlighter_808919" class="syntaxhighlighter  Brush"><div class="bar        "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.VIDEO_COMPLETE, nextVideo);</code></td></tr></tbody></table></div></div></div>

<p>Our <code>nextVideo()</code> method must find the <code>_currentVideo's</code> index in the <code>_videos</code> array and then we'll add one to the index to determine the next video. However, if we've reached the end of the array, we'll loop back to the beginning:</p>
<div id="highlighter_997090" class="syntaxhighlighter  Brush"><div class="bar                           "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">nextVideo(event:Event):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">next:</code><code class="Brush keyword">int</code> <code class="Brush plain">= _videos.indexOf(_currentVideo) + </code><code class="Brush value">1</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(next &gt;= _videos.length) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">next = </code><code class="Brush value">0</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">showVideo(_videos[next]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 17:</span> Transition Videos</h3>
<p>We need to add some code to our <code>showVideo()</code> method to transition out the old video and transition in the new one. Of course if the new video is the same as the old/current one, we should do nothing. We need to remove the listeners from the old video, fade its alpha and volume. Here is what the <code>showVideo()</code> method should look like after adding the transition code: </p>
<div id="highlighter_675386" class="syntaxhighlighter  Brush"><div class="bar                                                                                                       "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">showVideo(video:VideoLoader):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//if the new video is the one that's currently showing, do nothing.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(video == _currentVideo) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">return</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//The first time through, the _currentVideo will be null. That's when we need to activate the user interface</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo == </code><code class="Brush keyword">null</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">activateUI(); </code><code class="Brush comments">//don't activate the UI until the first video is ready. This avoids errors when _currentVideo is null.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">} </code><code class="Brush keyword">else</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//remove the event listeners from the _currentVideo (which is now the old one that will be replaced)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(LoaderEvent.PROGRESS, updateDownloadProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(VideoLoader.VIDEO_COMPLETE, nextVideo);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(VideoLoader.PLAY_PROGRESS, updatePlayProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//If the video is paused, we should togglePlayPause() so that the new video plays and the interface matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.videoPaused) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">togglePlayPause();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the current (old) video's alpha out. Remember the VideoLoader's "content" refers to the ContentDisplay Sprite we see on the screen.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo.content, </code><code class="Brush value">0.8</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the current (old) video's volume down to zero and then pause the video (it will be invisible by that time).</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo, </code><code class="Brush value">0.8</code><code class="Brush plain">, {volume:</code><code class="Brush value">0</code><code class="Brush plain">, onComplete:_currentVideo.pauseVideo});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//now swap the _currentLoader variable so it refers to the new video.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo = video;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for PROGRESS events so that we can update the loadingBar_mc's scaleX accordingly</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(LoaderEvent.PROGRESS, updateDownloadProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for a VIDEO_COMPLETE event so that we can automatically advance to the next video.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.VIDEO_COMPLETE, nextVideo);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for PLAY_PROGRESS events so that we can update the progressBar_mc's scaleX accordingly</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.PLAY_PROGRESS, updatePlayProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//start playing the video from its beginning</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.gotoVideoTime(</code><code class="Brush value">0</code><code class="Brush plain">, </code><code class="Brush keyword">true</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//always start with the volume at 0, and fade it up to 1 if necessary.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.volume = </code><code class="Brush value">0</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(!_silentMode) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo, </code><code class="Brush value">0.8</code><code class="Brush plain">, {volume:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//when we addChild() the VideoLoader's content, it makes it rise to the top of the stacking order</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">videoContainer_mc.addChild(_currentVideo.content);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>54</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the VideoLoader's content alpha in. Remember, the "content" refers to the ContentDisplay Sprite that we see on the stage.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>55</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo.content, </code><code class="Brush value">0.8</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>56</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>57</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//update the progressBar_mc and loadingBar_mc</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>58</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">updateDownloadProgress();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>59</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">updatePlayProgress();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>60</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<hr>
<h3><span>Step 18:</span> Activate the "Next" and "Back" Buttons</h3>
<p>We already have a <code>nextVideo()</code> method that we can call when the "next" button gets clicked, but let's built a similar one for the "back" button:</p>
<div id="highlighter_457238" class="syntaxhighlighter  Brush"><div class="bar            "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">previousVideo(event:Event):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">prev:</code><code class="Brush keyword">int</code> <code class="Brush plain">= _videos.indexOf(_currentVideo) - </code><code class="Brush value">1</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(prev &lt; </code><code class="Brush value">0</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">prev = _videos.length - </code><code class="Brush value">1</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">showVideo(_videos[prev]);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<p>In the <code>activateUI()</code> method, we'll add the <code>CLICK</code> event listeners to the next/back buttons:</p>
<div id="highlighter_35761" class="syntaxhighlighter  Brush"><div class="bar            "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">controlUI_mc.next_mc.addEventListener(MouseEvent.CLICK, nextVideo);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush plain">controlUI_mc.back_mc.addEventListener(MouseEvent.CLICK, previousVideo);</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 19:</span> Show the Preloader Animation While Buffering</h3>
<p>What if we <code>showVideo()</code> a video that hasn't even started loading yet? This becomes increasingly likely because of the "next" and "back" buttons that allow the user to skip forwards/backwards in the video queue. In that case, we should make sure that the new video gets prioritized in the LoaderMax queue and that we show the peloader animation until it has buffered enough to begin playing. Towards the bottom of the <code>showVideo()</code> method, we'll add some code to handle that scenario:</p>
<div id="highlighter_722508" class="syntaxhighlighter  Brush"><div class="bar                                                                                               "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush comments">//if the video hasn't fully loaded yet and is still buffering, show the preloader</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.progress &lt; </code><code class="Brush value">1</code> <code class="Brush plain">&amp;&amp; _currentVideo.bufferProgress &lt; </code><code class="Brush value">1</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//when the buffer fills, we'll fade out the preloader</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.VIDEO_BUFFER_FULL, bufferFullHandler);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//prioritizing the video ensures that it moves to the top of the LoaderMax gueue and any other loaders that were loading are canceled to maximize bandwidth available for the new video.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.prioritize(</code><code class="Brush keyword">true</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//play() the preloader and fade its alpha up.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">preloader_mc.play();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(preloader_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<p>And of course we'll need to add the simple <code>bufferFullHandler()</code> method that just fades out the preloader and then stops its animation:</p>
<div id="highlighter_750863" class="syntaxhighlighter  Brush"><div class="bar                             "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">bufferFullHandler(event:LoaderEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(preloader_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">, onComplete:preloader_mc.stop});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>We can't forget to remove the <code>VIDEO_BUFFER_FULL</code> listener when transitioning to another video. We'll see that in the final <code>showVideo()</code> method on step 21.</p>


<hr>
<h3><span>Step 20:</span> Refresh the Total Time Display</h3>
<p>Create a <code>refreshTotalTime()</code> method whose sole purpose is to report the duration of the <code>_currentVideo</code> in the appropriate TextField. We'll call this method from inside the <code>showVideo()</code> later. It is virtually identical to the code in the <code>updatePlayProgress()</code> method that reports the current playhead position in terms of minutes/seconds.</p>
<div id="highlighter_105263" class="syntaxhighlighter  Brush"><div class="bar                                                      "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">refreshTotalTime(event:LoaderEvent=</code><code class="Brush keyword">null</code><code class="Brush plain">):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">minutes:</code><code class="Brush keyword">String</code> <code class="Brush plain">= force2Digits(</code><code class="Brush keyword">int</code><code class="Brush plain">(_currentVideo.duration / </code><code class="Brush value">60</code><code class="Brush plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush variable">var</code> <code class="Brush plain">seconds:</code><code class="Brush keyword">String</code> <code class="Brush plain">= force2Digits(</code><code class="Brush keyword">int</code><code class="Brush plain">(_currentVideo.duration % </code><code class="Brush value">60</code><code class="Brush plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controlUI_mc.totalTime_tf.text = minutes + </code><code class="Brush string">":"</code> <code class="Brush plain">+ seconds;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>There is a chance that when we show a video, it may not have even loaded its metaData yet which contains its duration information. To determine if that's the case, we can simply check to see if the VideoLoader's <code>metaData</code> property is null. If so, we'll add an <code>INIT</code> event listener that invokes our <code>refreshTotalTime()</code> method (when the VideoLoader receives its <code>metaData</code>, it dispatches an <code>INIT</code> event). This is the code we'll add to the bottom of the <code>showVideo()</code> method:</p>
<div id="highlighter_956521" class="syntaxhighlighter  Brush"><div class="bar            "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">refreshTotalTime();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.metaData == </code><code class="Brush keyword">null</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(LoaderEvent.INIT, refreshTotalTime);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>



<hr>
<h3><span>Step 21:</span> The Final showVideo() Method</h3>
<p>Here it is in all its glory:</p>
<div id="highlighter_948455" class="syntaxhighlighter  Brush"><div class="bar                 "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">showVideo(video:VideoLoader):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//if the new video is the one that's currently showing, do nothing.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(video == _currentVideo) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">return</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//The first time through, the _currentVideo will be null. That's when we need to activate the user interface</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo == </code><code class="Brush keyword">null</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">activateUI(); </code><code class="Brush comments">//don't activate the UI until the first video is ready. This avoids errors when _currentVideo is null.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">} </code><code class="Brush keyword">else</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//remove the event listeners from the _currentVideo (which is now the old one that will be replaced)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(LoaderEvent.PROGRESS, updateDownloadProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(VideoLoader.VIDEO_COMPLETE, nextVideo);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(VideoLoader.PLAY_PROGRESS, updatePlayProgress);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(VideoLoader.VIDEO_BUFFER_FULL, bufferFullHandler);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.removeEventListener(LoaderEvent.INIT, refreshTotalTime);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//If the video is paused, we should togglePlayPause() so that the new video plays and the interface matches.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.videoPaused) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">togglePlayPause();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade out the preloader and then stop() it. If the new video needs to display the preloader, that's okay because the fade-in tween we create later will overwrite this one.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(preloader_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">, onComplete:preloader_mc.stop});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the current (old) video's alpha out. Remember the VideoLoader's "content" refers to the ContentDisplay Sprite we see on the screen.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo.content, </code><code class="Brush value">0.8</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">0</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the current (old) video's volume down to zero and then pause the video (it will be invisible by that time).</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo, </code><code class="Brush value">0.8</code><code class="Brush plain">, {volume:</code><code class="Brush value">0</code><code class="Brush plain">, onComplete:_currentVideo.pauseVideo});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//now swap the _currentLoader variable so it refers to the new video.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo = video;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for PROGRESS events so that we can update the loadingBar_mc's scaleX accordingly</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(LoaderEvent.PROGRESS, updateDownloadProgress);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for a VIDEO_COMPLETE event so that we can automatically advance to the next video.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.VIDEO_COMPLETE, nextVideo);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//listen for PLAY_PROGRESS events so that we can update the progressBar_mc's scaleX accordingly</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.PLAY_PROGRESS, updatePlayProgress);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//if the video hasn't fully loaded yet and is still buffering, show the preloader</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.progress &lt; </code><code class="Brush value">1</code> <code class="Brush plain">&amp;&amp; _currentVideo.bufferProgress &lt; </code><code class="Brush value">1</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//when the buffer fills, we'll fade out the preloader</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(VideoLoader.VIDEO_BUFFER_FULL, bufferFullHandler);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//prioritizing the video ensures that it moves to the top of the LoaderMax gueue and any other loaders that were loading are canceled to maximize bandwidth available for the new video.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>54</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.prioritize(</code><code class="Brush keyword">true</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>55</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>56</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//play() the preloader and fade its alpha up.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>57</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">preloader_mc.play();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>58</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(preloader_mc, </code><code class="Brush value">0.3</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>59</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>60</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>61</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//start playing the video from its beginning</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>62</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.gotoVideoTime(</code><code class="Brush value">0</code><code class="Brush plain">, </code><code class="Brush keyword">true</code><code class="Brush plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>63</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>64</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//always start with the volume at 0, and fade it up to 1 if necessary.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>65</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.volume = </code><code class="Brush value">0</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>66</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(!_silentMode) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>67</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo, </code><code class="Brush value">0.8</code><code class="Brush plain">, {volume:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>68</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>69</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>70</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//when we addChild() the VideoLoader's content, it makes it rise to the top of the stacking order</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>71</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">videoContainer_mc.addChild(_currentVideo.content);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>72</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>73</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//fade the VideoLoader's content alpha in. Remember, the "content" refers to the ContentDisplay Sprite that we see on the stage.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>74</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(_currentVideo.content, </code><code class="Brush value">0.8</code><code class="Brush plain">, {autoAlpha:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>75</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>76</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//update the total time display</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>77</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">refreshTotalTime();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>78</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>79</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//if the VideoLoader hasn't received its metaData yet (which contains duration information), we should set up a listener so that the total time gets updated when the metaData is received.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>80</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(_currentVideo.metaData == </code><code class="Brush keyword">null</code><code class="Brush plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>81</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">_currentVideo.addEventListener(LoaderEvent.INIT, refreshTotalTime);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>82</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>83</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>84</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">//update the progressBar_mc and loadingBar_mc</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>85</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">updateDownloadProgress();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>86</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">updatePlayProgress();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>87</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 22:</span> Make the Bar Clickable for Instant Seeking</h3>
<p>The user should be able to click anywhere on the loading bar to skip to that spot in the video immediately. This is very similar to the scrubbing feature except that the user doesn't have to drag the scrubber to the spot - they can just click there. We can add a <code>CLICK</code> event listener to our <code>loadingBar_mc</code> but one problem is that our <code>progressBar_mc</code> is on top of it, so <code>CLICK</code> events don't pass through to the <code>loadingBar_mc</code> if the user clicks on an area that overlaps with the <code>progressBar_mc</code>. This is why we set the <code>mouseEnabled</code> property of <code>progressBar_mc</code> to <code>false</code> in step 6 (in the <code>initUI()</code> method). This allows mouse events to pass through it.</p>

<p>We already built a <code>scrubToMouse()</code> method in a previous step which serves our purpose here perfectly, so we'll just set up our listener to point there. Add this line inside the <code>activateUI()</code> method:</p>
<div id="highlighter_646288" class="syntaxhighlighter  Brush"><div class="bar"><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">controlUI_mc.loadingBar_mc.addEventListener(MouseEvent.CLICK, scrubToMouse);</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 23:</span> Finishing Touches: Add Button Effects</h3>
<p>Let's make several of our UI elements act more like buttons by setting <code>buttonMode</code> to <code>true</code> and <code>mouseChildren</code> to <code>false</code> by adding this code inside <code>activateUI()</code>:</p>
<div id="highlighter_797705" class="syntaxhighlighter  Brush"><div class="bar "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush variable">var</code> <code class="Brush plain">controls:</code><code class="Brush keyword">Array</code> <code class="Brush plain">= [controlUI_mc.playPauseButton_mc, playPauseBigButton_mc, controlUI_mc.back_mc, controlUI_mc.next_mc, controlUI_mc.audio_mc, controlUI_mc.scrubber_mc];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush variable">var</code> <code class="Brush plain">i:</code><code class="Brush keyword">int</code> <code class="Brush plain">= controls.length;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush keyword">while</code> <code class="Brush plain">(i--) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controls[i].buttonMode = </code><code class="Brush keyword">true</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">controls[i].mouseChildren = </code><code class="Brush keyword">false</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>

<p>Next, we'll add <code>ROLL_OVER / ROLL_OUT</code> listeners to our "next", "back" and audio mute buttons so that their text gets tinted to white on rollover. We can reuse the same handler for all of the buttons and simply use the <code>event.target</code> to identify which one to tween (actually, since we named the TextField inside each one "label", we'll target <code>event.target.label</code>). This code should be added inside the <code>activateUI()</code> method:</p>
<div id="highlighter_690311" class="syntaxhighlighter  Brush"><div class="bar"><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">addListeners([controlUI_mc.back_mc, controlUI_mc.audio_mc, controlUI_mc.next_mc], MouseEvent.ROLL_OVER, blackRollOverHandler);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush plain">addListeners([controlUI_mc.back_mc, controlUI_mc.audio_mc, controlUI_mc.next_mc], MouseEvent.ROLL_OUT, blackRollOutHandler);</code></td></tr></tbody></table></div></div></div>

<p>And now for the handlers:</p>
<div id="highlighter_465801" class="syntaxhighlighter  Brush"><div class="bar "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">blackRollOverHandler(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(event.target.</code><code class="Brush keyword">label</code><code class="Brush plain">, </code><code class="Brush value">0.3</code><code class="Brush plain">, {tint:</code><code class="Brush value">0xFFFFFF</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">blackRollOutHandler(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(event.target.</code><code class="Brush keyword">label</code><code class="Brush plain">, </code><code class="Brush value">0.3</code><code class="Brush plain">, {tint:</code><code class="Brush keyword">null</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>


<h3><span>Step 24:</span> Grow/Shrink the Play/Pause Button on RollOver/Out</h3>
<p>Let's scale the play/pause button up when the user rolls over it, and then back down on rollout. First, add this code to <code>activateUI()</code>:</p>
<div id="highlighter_379922" class="syntaxhighlighter  Brush"><div class="bar"><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush plain">controlUI_mc.playPauseButton_mc.addEventListener(MouseEvent.ROLL_OVER, growPlayPause);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="Brush plain">controlUI_mc.playPauseButton_mc.addEventListener(MouseEvent.ROLL_OUT, shrinkPlayPause);</code></td></tr></tbody></table></div></div></div>

<p>Then build the handlers:</p>
<div id="highlighter_965498" class="syntaxhighlighter  Brush"><div class="bar    "><div class="toolbar"><a href="http://codeknow.com/opensource/videoLoader/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://codeknow.com/opensource/videoLoader/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://codeknow.com/opensource/videoLoader/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">growPlayPause(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(event.target, </code><code class="Brush value">0.2</code><code class="Brush plain">, {scaleX:</code><code class="Brush value">1.3</code><code class="Brush plain">, scaleY:</code><code class="Brush value">1.3</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="Brush keyword">private</code> <code class="Brush color3">function</code> <code class="Brush plain">shrinkPlayPause(event:MouseEvent):</code><code class="Brush keyword">void</code> <code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">TweenMax.to(event.target, </code><code class="Brush value">0.2</code><code class="Brush plain">, {scaleX:</code><code class="Brush value">1</code><code class="Brush plain">, scaleY:</code><code class="Brush value">1</code><code class="Brush plain">});</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>


<hr>
<h3><span>Step 25:</span> Compile</h3>
<p>You're done! Test your movie and enjoy your fancy new XML-driven video jukebox.</p>

<h3>Conclusion</h3>
<p>We covered a lot of ground in this tutorial and we ended up with a video player that offers snappy performance, elegant transitions, and an easily customizable interface. Plus the fact that it's XML-driven makes it simple to add more videos, change the order, etc. The LoaderMax system made loading a snap and even took care of controling video playback. Frankly we haven't even scratched the surface of what the LoaderMax system is capable of for other types of files, so I would encourage you to check out the <a href="http://www.greensock.com/loadermax/" title="GreenSock LoaderMax" target="_blank">web site</a> to learn more. And if you're not using <a href="http://www.greensock.com/tweenmax/" title="GreenSock TweenMax" target="_blank">TweenMax</a> or <a href="http://www.greensock.com/tweenlite/" title="GreenSock TweenLite" target="_blank">TweenLite</a>, you're missing out. If you have questions related to GreenSock tools, head over to the <a href="http://forums.greensock.com/" title="GreenSock Forums" target="_blank">forums</a>.</p>

<div class="tutorial_image"><img src="./Smart AS3 Video Loading and Playback with GreenSock LoaderMax - Active Premium_files/00.jpg" alt=""></div>


</div>
</div>



<div class="selection_bubble_root" style="display: none;"></div></body></html>